<!DOCTYPE html><html><head><meta charset="utf-8"><meta content="width=device-width,initial-scale=1" name="viewport"><title>Next2D | Framework API Documentation</title><meta itemprop="name" content="Next2D | Framework API Documentation"><meta itemprop="description" content="Framework API Documentation."><meta itemprop="image" content="https://next2d.app/assets/img/ogp.png"><meta property="og:url" content="https://next2d.app/"><meta property="og:type" content="website"><meta property="og:title" content="Next2D | Framework API Documentation"><meta property="og:description" content="Framework API Documentation."><meta property="og:image" content="https://next2d.app/assets/img/ogp.png"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="Next2D | Framework API Documentation"><meta name="twitter:description" content="Framework API Documentation."><meta name="twitter:image" content="https://next2d.app/assets/img/ogp.png"><link href="../../../assets/img/favicon.png" rel="icon"><link href="../../../assets/img/apple-touch-icon.png" rel="apple-touch-icon"><link href="../../../assets/vendor/aos/aos.css" rel="stylesheet"><link href="../../../assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet"><link href="../../../assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet"><link href="../../../assets/css/main.min.css" rel="stylesheet"><link href="styles/jsdoc.min.css" rel="stylesheet"><script async src="https://www.googletagmanager.com/gtag/js?id=G-8GJWF4S3RH"></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag("js", new Date());
        gtag("config", "G-8GJWF4S3RH");</script><script data-ad-client="ca-pub-5673019255498912" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script></head><body><header id="header" class="header fixed-top d-flex align-items-center"><div class="container d-flex align-items-center justify-content-between"><div id="logo"><a href="../../../en"><img loading="lazy" src="../../../assets/img/logo.svg" alt="Next2D Rendering Engine, NoCode Tool, Underlying Framework." title="Next2D Rendering Engine, NoCode Tool, Underlying Framework."></a></div><nav id="navbar" class="navbar"><ul class="list-unstyled"><li><a class="nav-link scrollto" href="../../../en/#get-started">Home</a></li><li><a class="nav-link scrollto" href="../../../en/#roadmap">Roadmap</a></li><li class="dropdown"><a class="nav-link scrollto" href="#player-list"><span>Player</span> <i class="bi bi-chevron-down"></i></a><ul><li><a href="https://github.com/Next2D/Player">GitHub</a></li><li><a href="../../../en/docs/player">API Docs</a></li><li><a href="../../../en/reference/player">Reference</a></li><li><a href="../../../en/#player">Features</a></li></ul></li><li class="dropdown"><a class="nav-link scrollto" href="#nocode-tool-list"><span>NoCode Tool</span> <i class="bi bi-chevron-down"></i></a><ul><li><a href="https://tool.next2d.app">Web Site</a></li><li><a href="../../../en/usage">Usage</a></li><li><a href="https://www.youtube.com/channel/UCKWvYSKSa8huzkr9T6GAPUw/videos">YouTube</a></li><li><a href="../../../en/#tool">Features</a></li></ul></li><li class="dropdown"><a class="nav-link scrollto" href="#framework-list"><span>Framework</span> <i class="bi bi-chevron-down"></i></a><ul><li><a href="https://github.com/Next2D/Framework">GitHub</a></li><li><a href="../../../en/docs/framework">API Docs</a></li><li><a href="../../../en/#framework">Features</a></li></ul></li><li class="dropdown"><a class="nav-link scrollto" href="#language-list"><span>Language</span> <i class="bi bi-chevron-down"></i></a><ul><li><a href="../../../en">English</a></li><li><a href="../../../ja">日本語</a></li><li><a href="../../../cn">简体中文</a></li></ul></li><li><a class="nav-link scrollto" href="../../../en/#contact">Contact</a></li></ul><i class="bi bi-list mobile-nav-toggle"></i></nav></div></header><main id="main"><section class="breadcrumbs"><div class="container"><div class="d-flex justify-content-between align-items-center"><h2>Framework API Documentation</h2><ol><li><a href="../../../en">Home</a></li><li>Framework API Documentation</li></ol></div></div></section><section id="docs" class="padd-section"><div class="container" data-aos="fade-up"><div class="row docs" data-aos="fade-up" data-aos-delay="100"><div class="col-md-12 col-lg-3"><div class="search"><input id="search" type="text" class="form-control input-md" placeholder="Search..."><script type="text/javascript">(() =>
        {
            document
                .getElementById("search")
                .addEventListener("keyup", (event) =>
                {
                    const value = event.currentTarget.value.trim();

                    document
                        .getElementById("sub-navbar")
                        .classList.remove("searching");

                    if (value) {

                        const element = document.getElementById("sub-navbar");

                        element.classList.add("searching");

                        const items = document
                            .getElementsByClassName("parent");

                        const regexp = new RegExp(value, "i");
                        for (let idx = 0; idx < items.length; ++idx) {

                            const item = items[idx];
                            if (!item.dataset.name || !regexp.test(item.dataset.name)) {

                                item
                                    .parentNode
                                    .parentNode
                                    .classList.remove("match");

                                item
                                    .parentNode
                                    .parentNode
                                    .classList.add("no-match");

                            } else {

                                item
                                    .parentNode
                                    .parentNode
                                    .classList.remove("no-match");

                                item
                                    .parentNode
                                    .parentNode
                                    .classList.add("match");

                            }
                        }

                        element.scrollTop(0);
                    }
                });
        })();</script></div><nav id="sub-navbar" class="sub-navbar"><ul class="list-unstyled"><li class="docs-item"><span class="title namespace"><span class="namespaceTag"><span class="glyphicon glyphicon-globe"></span> </span><a href="global.html">Global</a></span><ul class="members itemMembers"><span class="subtitle">Members</span><li class="parent" data-name="Util"><a href="global.html#Util">Util</a></li></ul><ul class="typedefs itemMembers"></ul><ul class="typedefs itemMembers"></ul><ul class="methods itemMembers"></ul><ul class="events itemMembers"></ul></li><li class="docs-item"><span class="title"><a href="Application.html">Application</a></span><ul class="members itemMembers"><span class="subtitle">Members</span><li class="" data-name="Application#app"><a href="Application.html#app">app</a></li><li class="" data-name="Application#cache"><a href="Application.html#cache">cache</a></li><li class="" data-name="Application#config"><a href="Application.html#config">config</a></li><li class="" data-name="Application#context"><a href="Application.html#context">context</a></li><li class="" data-name="Application#packages"><a href="Application.html#packages">packages</a></li><li class="" data-name="Application#query"><a href="Application.html#query">query</a></li><li class="" data-name="Application#response"><a href="Application.html#response">response</a></li></ul><ul class="typedefs itemMembers"></ul><ul class="typedefs itemMembers"></ul><ul class="methods itemMembers"><span class="subtitle">Methods</span><li class="parent" data-name="Application#gotoView"><a href="Application.html#gotoView">gotoView</a></li><li class="parent" data-name="Application#initialize"><a href="Application.html#initialize">initialize</a></li><li class="" data-name="Application#toJSON"><a href="Application.html#toJSON">toJSON</a></li></ul><ul class="events itemMembers"></ul></li><li class="docs-item"><span class="title"><a href="Cache.html">Cache</a></span><ul class="members itemMembers"></ul><ul class="typedefs itemMembers"></ul><ul class="typedefs itemMembers"></ul><ul class="methods itemMembers"><span class="subtitle">Methods</span><li class="parent" data-name="Cache#clear"><a href="Cache.html#clear">clear</a></li><li class="parent" data-name="Cache#delete"><a href="Cache.html#delete">delete</a></li><li class="parent" data-name="Cache#get"><a href="Cache.html#get">get</a></li><li class="parent" data-name="Cache#has"><a href="Cache.html#has">has</a></li><li class="parent" data-name="Cache#length"><a href="Cache.html#length">length</a></li><li class="parent" data-name="Cache#set"><a href="Cache.html#set">set</a></li></ul><ul class="events itemMembers"></ul></li><li class="docs-item"><span class="title"><a href="Content.html">Content</a></span><ul class="members itemMembers"><span class="subtitle">Members</span><li class="" data-name="Content#app"><a href="Content.html#app">app</a></li><li class="" data-name="Content#cache"><a href="Content.html#cache">cache</a></li><li class="" data-name="Content#config"><a href="Content.html#config">config</a></li><li class="" data-name="Content#context"><a href="Content.html#context">context</a></li><li class="" data-name="Content#packages"><a href="Content.html#packages">packages</a></li><li class="" data-name="Content#query"><a href="Content.html#query">query</a></li><li class="" data-name="Content#response"><a href="Content.html#response">response</a></li></ul><ul class="typedefs itemMembers"></ul><ul class="typedefs itemMembers"></ul><ul class="methods itemMembers"><span class="subtitle">Methods</span><li class="parent" data-name="Content#initialize"><a href="Content.html#initialize">initialize</a></li></ul><ul class="events itemMembers"></ul></li><li class="docs-item"><span class="title"><a href="Context.html">Context</a></span><ul class="members itemMembers"><span class="subtitle">Members</span><li class="parent" data-name="Context#root"><a href="Context.html#root">root</a></li><li class="parent" data-name="Context#view"><a href="Context.html#view">view</a></li><li class="parent" data-name="Context#viewModel"><a href="Context.html#viewModel">viewModel</a></li><li class="parent" data-name="Context#viewName"><a href="Context.html#viewName">viewName</a></li></ul><ul class="typedefs itemMembers"></ul><ul class="typedefs itemMembers"></ul><ul class="methods itemMembers"><span class="subtitle">Methods</span><li class="parent" data-name="Context#addChild"><a href="Context.html#addChild">addChild</a></li></ul><ul class="events itemMembers"></ul></li><li class="docs-item"><span class="title"><a href="Loading.html">Loading</a></span><ul class="members itemMembers"><span class="subtitle">Members</span><li class="" data-name="Loading#app"><a href="Loading.html#app">app</a></li><li class="" data-name="Loading#cache"><a href="Loading.html#cache">cache</a></li><li class="" data-name="Loading#config"><a href="Loading.html#config">config</a></li><li class="" data-name="Loading#context"><a href="Loading.html#context">context</a></li><li class="" data-name="Loading#packages"><a href="Loading.html#packages">packages</a></li><li class="" data-name="Loading#query"><a href="Loading.html#query">query</a></li><li class="" data-name="Loading#response"><a href="Loading.html#response">response</a></li></ul><ul class="typedefs itemMembers"></ul><ul class="typedefs itemMembers"></ul><ul class="methods itemMembers"><span class="subtitle">Methods</span><li class="parent" data-name="Loading#end"><a href="Loading.html#end">end</a></li><li class="parent" data-name="Loading#start"><a href="Loading.html#start">start</a></li><li class="" data-name="Loading#toJSON"><a href="Loading.html#toJSON">toJSON</a></li></ul><ul class="events itemMembers"></ul></li><li class="docs-item"><span class="title"><a href="Model.html">Model</a></span><ul class="members itemMembers"><span class="subtitle">Members</span><li class="parent" data-name="Model#app"><a href="Model.html#app">app</a></li><li class="parent" data-name="Model#cache"><a href="Model.html#cache">cache</a></li><li class="parent" data-name="Model#config"><a href="Model.html#config">config</a></li><li class="parent" data-name="Model#context"><a href="Model.html#context">context</a></li><li class="parent" data-name="Model#packages"><a href="Model.html#packages">packages</a></li><li class="parent" data-name="Model#query"><a href="Model.html#query">query</a></li><li class="parent" data-name="Model#response"><a href="Model.html#response">response</a></li></ul><ul class="typedefs itemMembers"></ul><ul class="typedefs itemMembers"></ul><ul class="methods itemMembers"><span class="subtitle">Methods</span><li class="parent" data-name="Model#toJSON"><a href="Model.html#toJSON">toJSON</a></li></ul><ul class="events itemMembers"></ul></li><li class="docs-item"><span class="title"><a href="MovieClip.html">MovieClip</a></span><ul class="members itemMembers"><span class="subtitle">Members</span><li class="parent" data-name="MovieClip#app"><a href="MovieClip.html#app">app</a></li><li class="parent" data-name="MovieClip#cache"><a href="MovieClip.html#cache">cache</a></li><li class="parent" data-name="MovieClip#config"><a href="MovieClip.html#config">config</a></li><li class="parent" data-name="MovieClip#context"><a href="MovieClip.html#context">context</a></li><li class="parent" data-name="MovieClip#packages"><a href="MovieClip.html#packages">packages</a></li><li class="parent" data-name="MovieClip#query"><a href="MovieClip.html#query">query</a></li><li class="parent" data-name="MovieClip#response"><a href="MovieClip.html#response">response</a></li></ul><ul class="typedefs itemMembers"></ul><ul class="typedefs itemMembers"></ul><ul class="methods itemMembers"></ul><ul class="events itemMembers"></ul></li><li class="docs-item"><span class="title"><a href="StyleSheet.html">StyleSheet</a></span><ul class="members itemMembers"></ul><ul class="typedefs itemMembers"></ul><ul class="typedefs itemMembers"></ul><ul class="methods itemMembers"><span class="subtitle">Methods</span><li class="parent" data-name="StyleSheet#apply"><a href="StyleSheet.html#apply">apply</a></li><li class="parent" data-name="StyleSheet#parse"><a href="StyleSheet.html#parse">parse</a></li></ul><ul class="events itemMembers"></ul></li><li class="docs-item"><span class="title"><a href="View.html">View</a></span><ul class="members itemMembers"><span class="subtitle">Members</span><li class="" data-name="View#app"><a href="View.html#app">app</a></li><li class="" data-name="View#cache"><a href="View.html#cache">cache</a></li><li class="" data-name="View#config"><a href="View.html#config">config</a></li><li class="" data-name="View#context"><a href="View.html#context">context</a></li><li class="" data-name="View#packages"><a href="View.html#packages">packages</a></li><li class="" data-name="View#query"><a href="View.html#query">query</a></li><li class="" data-name="View#response"><a href="View.html#response">response</a></li></ul><ul class="typedefs itemMembers"></ul><ul class="typedefs itemMembers"></ul><ul class="methods itemMembers"><span class="subtitle">Methods</span><li class="parent" data-name="View#initialize"><a href="View.html#initialize">initialize</a></li></ul><ul class="events itemMembers"></ul></li><li class="docs-item"><span class="title"><a href="ViewModel.html">ViewModel</a></span><ul class="members itemMembers"><span class="subtitle">Members</span><li class="" data-name="ViewModel#app"><a href="ViewModel.html#app">app</a></li><li class="" data-name="ViewModel#cache"><a href="ViewModel.html#cache">cache</a></li><li class="" data-name="ViewModel#config"><a href="ViewModel.html#config">config</a></li><li class="" data-name="ViewModel#context"><a href="ViewModel.html#context">context</a></li><li class="" data-name="ViewModel#packages"><a href="ViewModel.html#packages">packages</a></li><li class="" data-name="ViewModel#query"><a href="ViewModel.html#query">query</a></li><li class="" data-name="ViewModel#response"><a href="ViewModel.html#response">response</a></li></ul><ul class="typedefs itemMembers"></ul><ul class="typedefs itemMembers"></ul><ul class="methods itemMembers"><span class="subtitle">Methods</span><li class="parent" data-name="ViewModel#bind"><a href="ViewModel.html#bind">bind</a></li><li class="" data-name="ViewModel#toJSON"><a href="ViewModel.html#toJSON">toJSON</a></li><li class="parent" data-name="ViewModel#unbind"><a href="ViewModel.html#unbind">unbind</a></li></ul><ul class="events itemMembers"></ul></li></ul><i class="bi bi-list mobile-sub-nav-toggle"></i></nav></div><div class="col-md-12 col-lg-9"><div><div class="page-title" data-filename="Application.js.html">Source: Application.js</div><section><header><div class="header content-size"><h1>Application.js</h1></div></header><article><pre id="source-code" class="prettyprint source linenums"><code>import { Model } from "./model/common/Model";
import { Context } from "./Context";
import { Cache } from "./cache/Cache";

/**
 * シーン遷移のコントロールを行うクラス。
 * Class for controlling scene transitions.
 *
 * @class
 * @extends {Model}
 */
export class Application extends Model
{
    /**
     * @param {object} config
     * @param {array}  packages
     * @constructor
     * @public
     */
    constructor (config, packages)
    {
        super ();

        /**
         * @type {object}
         * @static
         */
        next2d.fw.config = config;

        /**
         * @type {Map}
         * @static
         */
        next2d.fw.packages = new Map(packages);

        /**
         * @type {Application}
         * @static
         */
        next2d.fw.application = this;

        /**
         * @type {Context}
         * @static
         */
        next2d.fw.context = new Context(
            config.stage.width,
            config.stage.height,
            config.stage.fps,
            config.stage.options
        );

        /**
         * @type {Cache}
         * @static
         */
        next2d.fw.cache = new Cache();

        /**
         * @type {Cache}
         * @static
         */
        next2d.fw.query = new Cache();

        if (this.config.spa) {
            window.addEventListener("popstate", () =>
            {
                this._$popstate = true;
                this.gotoView();
            });
        }

        /**
         * @type {boolean}
         * @default false
         * @private
         */
        this._$popstate = false;

        // initial processing
        this.initialize();
    }

    /**
     * constructorが起動した後にコールされます。(初回起動時のみコールされます。)
     * Called after the constructor is invoked. (Called only the first time it is invoked.)
     * @return {void}
     * @abstract
     */
    // eslint-disable-next-line no-empty-function
    initialize () {}

    /**
     * 指定のViewを起動して、描画を開始します。引数を指定しない場合はURLをパースしてViewを起動します。
     * Launches the specified View and starts drawing. If no argument is specified,
     * the URL will be parsed and the View will be launched.
     *
     * @param  {string} [name=null]
     * @return {void}
     * @method
     * @public
     */
    gotoView (name = null)
    {
        if (this.config.loading) {
            this._$createSnapshot();
            this._$startLoading();
        }

        if (this.query.length) {
            this.query.clear();
        }

        let query = "";
        if (!name &amp;&amp; location.search) {
            query = location.search;
            const parameters = query.slice(1).split("&amp;");
            for (let idx = 0; idx &lt; parameters.length; ++idx) {
                const pair = parameters[idx].split("=");
                this.query.set(pair[0], pair[1]);
            }
        }

        if (!name) {
            name = location.pathname.slice(1);
            if (name) {
                const routing = this.config.routing[name];
                if (routing &amp;&amp; routing.private) {
                    name = routing.redirect || "top";
                }
            }

            if (!name) {
                name = "top";
            }
        }

        if (name.indexOf("?") > -1) {

            const names = name.split("?");

            name  = names[0];
            query = `?${names[1]}`;

            const parameters = names[1].split("&amp;");
            for (let idx = 0; idx &lt; parameters.length; ++idx) {
                const pair = parameters[idx].split("=");
                this.query.set(pair[0], pair[1]);
            }
        }

        if (name.slice(0, 1) === ".") {
            name = name.split("/").slice(1).join("/") || "top";
        }

        if (this.config.spa &amp;&amp; !this._$popstate) {
            const url = name === "top"
                ? `${location.origin}${location.search}`
                : `${location.origin}/${name}${query}`;

            history.pushState("", "", url);
        }

        // update
        this._$popstate = false;

        Promise
            .all(this._$requests(name))
            .then((responses) =>
            {
                return Promise.resolve(this.context.addChild(name, responses));
            })
            .then((view) =>
            {
                if ("gotoView" in this.config) {
                    this._$callback(this.config.gotoView.callback, view);
                }
            });
    }

    /**
     * @return {void}
     * @private
     */
    _$createSnapshot ()
    {
        const root = this.context.root;

        const ratio = window.devicePixelRatio;

        const { Sprite, Shape, BitmapData } = next2d.display;
        const { Matrix } = next2d.geom;

        const bitmapData = new BitmapData(
            root.stage.stageWidth  * ratio,
            root.stage.stageHeight * ratio,
            true, 0
        );

        const player = root.stage._$player;
        const matrix = player._$matrix;

        const drawMatrix = new Matrix(
            matrix[0], matrix[1],
            matrix[2], matrix[3],
            matrix[4], matrix[5]
        );

        bitmapData.draw(root, drawMatrix);

        // remove all
        while (root.numChildren) {
            root.removeChild(root.getChildAt(0));
        }

        const sprite  = root.addChild(new Sprite());
        sprite.x = -matrix[4] / matrix[0];
        sprite.y = -matrix[5] / matrix[3];
        sprite.scaleX = 1 / matrix[0];
        sprite.scaleY = 1 / matrix[3];

        const snapshot = sprite.addChild(new Shape());
        snapshot
            .graphics
            .beginBitmapFill(bitmapData)
            .drawRect(0, 0, bitmapData.width, bitmapData.height)
            .endFill();

        const width  = this.config.stage.width;
        const height = this.config.stage.height;

        const mask = root.addChild(new Shape());
        mask
            .graphics
            .beginFill(0, 0.8)
            .drawRect(0, 0, width, height)
            .endFill();

        const tx = matrix[4];
        if (tx) {
            const scaleX = matrix[0];
            mask.scaleX = (width + tx * 2 / scaleX) / width;
            mask.x = -tx / scaleX;
        }

        const ty = matrix[5];
        if (ty) {
            const scaleY = matrix[3];
            mask.scaleY = (height + ty * 2 / scaleY) / height;
            mask.y = -ty / scaleY;
        }
    }

    /**
     * @return {void}
     * @private
     */
    _$startLoading ()
    {
        if (!this.config.loading) {
            return ;
        }

        const callback = this.config.loading.callback;
        if (!callback) {
            return ;
        }

        const CallbackClass = this.packages.has(callback)
            ? this.packages.get(callback)
            : next2d.fw.Loading;
        new CallbackClass().start();
    }

    /**
     * @param  {string} name
     * @return {array}
     * @method
     * @private
     */
    _$requests (name)
    {
        const routing = this.config.routing[name];
        if (!routing || !routing.requests || !routing.requests.length) {
            return [];
        }

        const promises = [];
        for (let idx = 0; idx &lt; routing.requests.length; ++idx) {

            const object = routing.requests[idx];
            if (object.cache &amp;&amp; object.name) {

                const name = this._$parseConfig(object.name);
                if (this.cache.has(name)) {

                    const cache = this.cache.get(name);

                    this._$callback(this._$parseConfig(object.callback), cache);

                    promises.push({
                        "name": name,
                        "response": cache
                    });

                    continue;
                }
            }

            switch (this._$parseConfig(object.type)) {

                case "custom":
                    promises.push(this._$loadCustom(object));
                    break;

                case "json":
                    promises.push(this._$loadJSON(object));
                    break;

                default:
                    promises.push(this._$loadContent(object));
                    break;

            }
        }

        return promises;
    }

    /**
     * @param  {object} object
     * @return {Promise}
     * @method
     * @private
     */
    _$loadCustom (object)
    {
        return new Promise((resolve) =>
        {
            const className = this._$parseConfig(object.class);
            if (!this.packages.has(className)) {
                return resolve(null);
            }

            const CallbackClass = this.packages.get(className);
            const promise = this._$parseConfig(object.access) === "static"
                ? Promise.resolve(CallbackClass[this._$parseConfig(object.method)]())
                : Promise.resolve(new CallbackClass()[this._$parseConfig(object.method)]());

            promise
                .then((value) =>
                {
                    this._$callback(this._$parseConfig(object.callback), value);

                    if (object.cache &amp;&amp; object.name) {
                        next2d.fw.cache.set(this._$parseConfig(object.name), value);
                    }

                    resolve({
                        "name": this._$parseConfig(object.name),
                        "response": value
                    });
                })
                .catch((error) =>
                {
                    console.error(error);
                });
        });
    }

    /**
     * @param  {object} object
     * @return {Promise}
     * @method
     * @private
     */
    _$loadJSON (object)
    {
        const method = object.method
            ? this._$parseConfig(object.method).toUpperCase()
            : "GET";

        const body   = object.body &amp;&amp; (method === "POST" || method === "PUT")
            ? object.body
            : null;

        return fetch(`${this._$parseConfig(object.path)}`, {
            "method": method,
            "headers": object.headers ? object.headers : {},
            "body": body
        })
            .then((response) =>
            {
                return response.json();
            })
            .then((value) =>
            {
                this._$callback(this._$parseConfig(object.callback), value);

                if (object.cache &amp;&amp; object.name) {
                    next2d.fw.cache.set(this._$parseConfig(object.name), value);
                }

                return {
                    "name": this._$parseConfig(object.name),
                    "response": value
                };
            })
            .catch((error) =>
            {
                console.error(error);
            });
    }

    /**
     * @param  {object} object
     * @return {Promise}
     * @method
     * @private
     */
    _$loadContent (object)
    {
        return new Promise((resolve, reject) =>
        {
            const { URLRequest, URLRequestHeader, URLRequestMethod } = next2d.net;
            const { Loader } = next2d.display;
            const { Event, IOErrorEvent } = next2d.events;

            const request  = new URLRequest(`${this._$parseConfig(object.path)}`);
            request.method = object.method
                ? this._$parseConfig(object.method).toUpperCase()
                : URLRequestMethod.GET;

            if (object.headers) {
                for (const [name, value] of Object.entries(object.headers)) {
                    request.requestHeaders.push(new URLRequestHeader(name, value));
                }
            }

            if (object.body) {
                request.data = JSON.stringify(object.body);
            }

            const loader = new Loader();
            loader
                .contentLoaderInfo
                .addEventListener(Event.COMPLETE, (event) =>
                {
                    const content    = event.currentTarget.content;
                    const loaderInfo = content._$loaderInfo;

                    // DisplayObjectContainer
                    if (loaderInfo._$data) {
                        const symbols = loaderInfo._$data.symbols;
                        if (symbols.size) {
                            for (const name of symbols.keys()) {
                                next2d.fw.loaderInfo.set(name, loaderInfo);
                            }
                        }
                    }

                    this._$callback(object.callback, content);

                    if (object.cache &amp;&amp; object.name) {
                        next2d.fw.cache.set(this._$parseConfig(object.name), content);
                    }

                    resolve({
                        "name": this._$parseConfig(object.name),
                        "response": content
                    });
                });

            loader
                .contentLoaderInfo
                .addEventListener(IOErrorEvent.IO_ERROR, reject);

            if (this._$parseConfig(object.type) === "image") {

                loader.loadImage(request);

            } else {

                loader.load(request);

            }
        });
    }

    /**
     * @param  {string|array} [callback=null]
     * @param  {*} [value=null]
     * @return {void}
     * @private
     */
    _$callback (callback = null, value = null)
    {
        if (!callback) {
            return ;
        }

        const callbacks = typeof callback === "string"
            ? [callback]
            : callback;

        for (let idx = 0; idx &lt; callbacks.length; ++idx) {

            const name = this._$parseConfig(callbacks[idx]);
            if (!this.packages.has(name)) {
                continue;
            }

            const CallbackClass = this.packages.get(name);
            new CallbackClass(value).execute();
        }
    }

    /**
     * @param  {string} [value=null]
     * @return {string}
     * @private
     */
    _$parseConfig (value)
    {
        if (typeof value !== "string" || value.indexOf("{{") === -1) {
            return value;
        }

        const values = value.match(/\{\{(.*?)\}\}/g);
        if (!values) {
            return value;
        }

        let returnValue = value;
        for (let idx = 0; idx &lt; values.length; ++idx) {

            const value = values[idx];

            const names = value
                .replace(/\{|\{|\}|\}/g, "")
                .replace(/ /g, "")
                .split(".");

            let config = this.config;
            for (let idx = 0; idx &lt; names.length; ++idx) {
                const name = names[idx];
                if (name in config) {
                    config = config[name];
                }
            }

            if (!config) {
                continue;
            }

            returnValue = returnValue.replace(value, config);
        }

        return returnValue;
    }
}</code></pre></article></section><script type="text/javascript">(() =>
    {
        let counter = 1;

        const source = document.getElementById("source-code");
        if (source) {
            const code = source.getElementsByTagName("code")[0];

            let numbered = code.innerHTML.split("\n");
            numbered = numbered.map((item) =>
            {
                return `<li id="line${counter++}"><code>${item}</code></li>`;
            });

            code.remove();

            const ol = document.createElement("ol");
            ol.classList.add("linenums");

            source.appendChild(ol);
            ol.innerHTML = numbered.join("");
        }

    })();</script></div></div></div></div></section></main><footer class="footer" data-aos="fade-up"><div class="container"><div class="row"><div class="col-md-12 col-lg-4"><div class="footer-logo"><a class="navbar-brand" href="../../../en">Next2D</a><p>Next2D, a project derived from the JavaScript FlashPlayer &quot;swf2js&quot;, aims to provide the fastest 2D engine that works on any device.<br>Created by Toshiyuki Ienaga.</p></div><div class="list-sns-menu"><ul class="list-unstyled"><li><a href="https://twitter.com/ienagatoshiyuki"><i class="bi bi-twitter"></i></a></li><li><a href="https://github.com/ienaga"><i class="bi bi-github"></i></a></li></ul></div></div><div class="col-sm-6 col-md-3 col-lg-2"><div class="list-menu"><h4>Player</h4><ul class="list-unstyled"><li><a href="https://github.com/Next2D/Player">GitHub</a></li><li><a href="../../../en/docs/player">API Docs</a></li><li><a href="../../../en/reference/player">Reference</a></li><li><a href="../../../en/#player">Features</a></li></ul></div></div><div class="col-sm-6 col-md-3 col-lg-2"><div class="list-menu"><h4>Tool</h4><ul class="list-unstyled"><li><a href="https://tool.next2d.app">Web Site</a></li><li><a href="../../../en/usage">Usage</a></li><li><a href="https://www.youtube.com/channel/UCKWvYSKSa8huzkr9T6GAPUw/videos">YouTube</a></li><li><a href="../../../en/#tool">Features</a></li></ul></div></div><div class="col-sm-6 col-md-3 col-lg-2"><div class="list-menu"><h4>Framework</h4><ul class="list-unstyled"><li><a href="https://github.com/Next2D/Framework">GitHub</a></li><li><a href="../../../en/docs/framework">API Docs</a></li><li><a href="../../../en/#framework">Features</a></li></ul></div></div><div class="col-sm-6 col-md-3 col-lg-2"><div class="list-menu"><h4>About US</h4><ul class="list-unstyled"><li><a href="../../../en/#contact">Contact</a></li><li><a href="../../../en/privacy">Privacy Policy</a></li></ul></div></div></div></div><div class="copyrights"><div class="container"><p>&copy; Copyrights Next2D. All rights reserved.</p></div></div></footer><a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a><script src="../../../assets/vendor/aos/aos.js"></script><script src="../../../assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script><script src="../../../assets/js/main.min.js"></script><script type="text/javascript">(() =>
    {
        const filename = document
            .getElementsByClassName("page-title")[0]
            .dataset.filename
            .replace(".html", "");

        const items = document
            .getElementsByClassName("docs-item");

        for (let idx = 0; idx < items.length; ++idx) {

            const item = items[idx];
            if (item.firstChild.textContent !== filename) {
                continue;
            }

            item.classList.add("current");
            if (idx) {
                const parent = item.parentNode;
                item.remove();
                parent.insertBefore(item, items[0]);
            }

            break;
        }

    })();</script></body></html>